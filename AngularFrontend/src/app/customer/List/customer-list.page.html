<div class="col-12">
    <div class="card">
        <div class="flex">
            <div class="col-6">
                <h5>Customers</h5>
            </div>
            <div class="flex flex-column align-items-end col-6" style="padding: 0px;">
                <a pButton pRipple type="button" label="Add New" [routerLink]="'create'" class="force-white-text"></a>
            </div>
        </div>
        <p-toast></p-toast>
        <p-confirmDialog></p-confirmDialog>
        <p-table [value]="customers" responsiveLayout="scroll" editMode="row" selectionMode="single" dataKey="id" 
            responsiveLayout="stack"
            [(selection)]="selectedCustomer" 
            (onRowSelect)="onRowSelect($event)"
            [paginator]="true"
            [rows]="10"
            [showCurrentPageReport]="true"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
            [rowsPerPageOptions]="[10, 20, 50]"
            [loading]="loading"
            [totalRecords]="totalRecords"
            [lazy]="true"
            (onLazyLoad)="loadCustomers($event)"
            >
            <ng-template pTemplate="header">
                <tr>
                    <th></th>
                    <th pSortableColumn="firstName">
                        First Name
                        <p-sortIcon field="firstName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="lastName">
                        LastName
                        <p-sortIcon field="lastName"></p-sortIcon>
                    </th>
                    <th>
                        E-Mail
                    </th>
                    <th>
                        Phone
                    </th>
                    <th>
                        Description
                    </th>
                    <th>
                        Created
                    </th>
                    <th>
                        Last Update
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-customer let-editing="editing" let-ri="id">
                <tr customer-list-row [pEditableRow]="customer" [customer]="customer" [pSelectableRow]="customer"
                    (customerChanged)="onCustomerChanged($event)" 
                    (changeCanceled)="onChangedCanceled($event)"
                    (deleteCustomer)="onCustomerDelete($event)">
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>
